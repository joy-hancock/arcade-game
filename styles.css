:root {
  /* Colors */
  --clr-white: #ffffff;
  --clr-black: #000;
  --clr-pink: #ff0088;

  --clr-accent: #ffff00;

  /* Font family */
  --font-base: 'Orbitron', sans-serif;
  --font-secondary: 'Press Start 2P', system-ui;

  /* Font sizes */
  /* https://utopia.fyi/type/calculator?c=320,16,1.2,1440,24,1.333,4,1,&s=0.75%7C0.5%7C0.25,1.5%7C2%7C3%7C4%7C6,s-l%7Cl-2xl&g=s,l,xl,4 */
  --step--1: clamp(0.8333rem, 0.7499rem + 0.4171vw, 1.1253rem);
  --step-0: clamp(1rem, 0.8571rem + 0.7143vw, 1.5rem);
  --step-1: clamp(1.2rem, 0.9716rem + 1.1421vw, 1.9995rem);
  --step-2: clamp(1.44rem, 1.0899rem + 1.7505vw, 2.6653rem);
  --step-3: clamp(1.728rem, 1.2066rem + 2.607vw, 3.5529rem);
  --step-4: clamp(2.0736rem, 1.3129rem + 3.8034vw, 4.736rem);
  --step-5: clamp(2.4883rem, 1.3955rem + 5.464vw, 6.3131rem);
  --step-6: clamp(2.986rem, 1.4347rem + 7.7562vw, 8.4153rem);

  /* Font weights */
  --fw-normal: 400;
  --fw-medium: 500;
  --fw-bold: 700;

  /* Spacing */

  /* @link https://utopia.fyi/space/calculator?c=320,16,1.2,1440,24,1.333,4,1,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l|l-2xl&g=s,l,xl,4 */

  --space-3xs: clamp(0.25rem, 0.2143rem + 0.1786vw, 0.375rem);
  --space-2xs: clamp(0.5rem, 0.4286rem + 0.3571vw, 0.75rem);
  --space-xs: clamp(0.75rem, 0.6429rem + 0.5357vw, 1.125rem);
  --space-s: clamp(1rem, 0.8571rem + 0.7143vw, 1.5rem);
  --space-m: clamp(1.5rem, 1.2857rem + 1.0714vw, 2.25rem);
  --space-l: clamp(2rem, 1.7143rem + 1.4286vw, 3rem);
  --space-xl: clamp(3rem, 2.5714rem + 2.1429vw, 4.5rem);
  --space-2xl: clamp(4rem, 3.4286rem + 2.8571vw, 6rem);
  --space-3xl: clamp(6rem, 5.1429rem + 4.2857vw, 9rem);

  /* One-up pairs */
  --space-3xs-2xs: clamp(0.25rem, 0.1071rem + 0.7143vw, 0.75rem);
  --space-2xs-xs: clamp(0.5rem, 0.3214rem + 0.8929vw, 1.125rem);
  --space-xs-s: clamp(0.75rem, 0.5357rem + 1.0714vw, 1.5rem);
  --space-s-m: clamp(1rem, 0.6429rem + 1.7857vw, 2.25rem);
  --space-m-l: clamp(1.5rem, 1.0714rem + 2.1429vw, 3rem);
  --space-l-xl: clamp(2rem, 1.2857rem + 3.5714vw, 4.5rem);
  --space-xl-2xl: clamp(3rem, 2.1429rem + 4.2857vw, 6rem);
  --space-2xl-3xl: clamp(4rem, 2.5714rem + 7.1429vw, 9rem);

  /* Custom pairs */
  --space-s-l: clamp(1rem, 0.4286rem + 2.8571vw, 3rem);
  --space-l-2xl: clamp(2rem, 0.8571rem + 5.7143vw, 6rem);

  /* Line height */
  --lh-flat: 1.1;
  --lh-fine: 1.2;
  --lh-standard: 1.4;
  --lh-loose: 1.7;
}

/* Box sizing rules */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Utility classes */
.font-base {
  font-family: var(--font-base);
}
.font-secondary {
  font-family: var(--font-secondary);
}

/* Prevent font size inflation */
html {
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
}

Remove default margin in favour of better control in authored CSS body,
h1,
h2,
h3,
h4,
p,
figure,
blockquote,
dl,
dd {
  margin-block-end: 0;
}

body {
  min-height: 100vh;
  max-width: 100vw;
  color: var(--clr-white);
  font-family: var(--font-base);
  font-size: var(--step-1);
  line-height: var(--lh-standard);
  font-size-adjust: from-font;
  margin: 0;
}

/* Begin Body Custom Styles */

body {
  background: var(--clr-black);
  display: grid;
  place-items: center;
  overflow: hidden;
  text-align: center;
  color: white;
  text-wrap: balance;
}

.gameContainer {
  position: relative;
  width: 100vw;
  background-image: url('https://helpimg.s3.us-east-1.amazonaws.com/landing_pages/CSAM/2025/arcade/background.png');
  background-size: 150%;
  background-repeat: no-repeat;
  height: 100vh;
  background-position-x: 50%;
  background-position-y: 0%;
  overflow: hidden;
  transition: all 2s 0.25s;
  display: flex;

  &:has(#game:checked) {
    background-size: 100%;
    background-position-y: 50%;
  }
}

@media screen and (width <= 45rem) {
  body {
    overflow: scroll;
  }
  .gameContainer {
    background-size: cover;
    overflow: scroll;
    &:has(#game:checked) {
      background-size: cover;
    }
  }
}
form {
  counter-reset: score red-flags;
}

input[name='screen'] {
  display: none;
  /* translate: 0 5em; */

  &#start:checked ~ .screen-start,
  &#game:checked ~ .screen-game {
    display: grid;
    opacity: 1;
    align-content: space-between;

    @starting-style {
      opacity: 0;
    }
  }

  &#game:checked ~ .screen-game .red-flag {
    animation: drop 5s var(--delay, 0s) ease-in forwards
      var(--playState, running);
  }

  &#game:checked ~ .screen-game .enkryptor {
    animation: drop 7s var(--delay, 0s) ease-in forwards
      var(--playState, running);
  }

  &#game:checked ~ .screen-game .cyberpunk {
    animation: drop 8s var(--delay, 0s) ease-in forwards
      var(--playState, running);
  }

  &#game:checked ~ .screen-game .deepfake {
    animation: drop 9s var(--delay, 0s) ease-in forwards
      var(--playState, running);
  }

  &#game:checked ~ .screen-game .doppelganger {
    animation: drop 8s var(--delay, 0s) ease-in forwards
      var(--playState, running);
  }

  &#game:checked ~ .screen-end {
    animation: screenEnd 0.5s 32.5s forwards;
  }
}

@keyframes screenEnd {
  to {
    opacity: 1;
    pointer-events: revert;
  }
}

@keyframes drop {
  from {
    translate: var(--translateX) -60vh;
  }
  to {
    translate: calc(var(--translateX) + var(--offset, 0px)) 110vh;
  }
}

.screen {
  position: absolute;
  inset: 0;
  opacity: 0;
  display: none;
  place-items: center;
  align-content: center;
  user-select: none;
  transition-behavior: allow-discrete;
  padding: var(--space-l) var(--space-xl);
  margin: auto;
  color: var(--clr-white);
}

.buttonish {
  display: flex;
  align-items: center;
  gap: 3rem;

  & svg {
    height: 5rem;
  }
}

/* .screen-start {
  display: none;
} */

.screen-game {
  cursor: url('https://helpimg.s3.us-east-1.amazonaws.com/landing_pages/CAM25/Space-Invaders.png'),
    auto;
  display: none;
  opacity: 0;
}

.screen-end {
  display: grid;
  pointer-events: none;
  align-content: space-between;
  gap: 2rem;
  padding-block-end: 0;

  button {
    background: var(--clr-pink);
    animation: arcadeFlash 0.4s steps(1) infinite;
    padding: 0.25em 1em;
    border: 5px solid var(--clr-black);
    outline: 5px solid var(--clr-accent);
    margin-block-end: var(--space-m);
  }

  button:active {
    scale: 0.95;
  }

  .disclaimer {
    padding-block-end: var(--space-3xs);
  }
}

@keyframes arcadeFlash {
  0%,
  100% {
    color: #ffffff;
  }
  50% {
    color: #ffff00;
  }
}

.total .result::after {
  content: attr(data-final-score);
}

h1 {
  font-size: var(--step-5);
  text-shadow: 1px 1px 5px var(--clr-black);
  font-family: var(--font-secondary);
  text-transform: uppercase;
  margin-block-start: 0;
}

.buttonish {
  font-family: var(--font-secondary);
  text-transform: uppercase;
  font-size: var(--step-3);
  cursor: pointer;

  &:hover .cls-1 {
    fill: var(--clr-accent);
  }

  &:hover {
    color: var(--clr-accent);
  }
}

.flags {
  position: absolute;
}

.flag {
  --rnd: calc(mod(sin((var(--i) / 27) * 90deg) * 123456, 1));
  --rnd2: calc(mod(sin((var(--i) / 27) * 90deg) * 654321, 1));
  --translateX: calc(var(--rnd) * 85vw - 42.5vw);
  --angle: calc(var(--rnd) * 60deg - 30deg);
  --offset: calc((var(--rnd2) * 2 - 1) * 30vw);
  --scale: calc(mod(sin((var(--i) / 26) * 90deg) * 6548, 1) * 0.3 + 0.7);

  appearance: none;
  position: absolute;
  cursor: url('https://helpimg.s3.us-east-1.amazonaws.com/landing_pages/CAM25/Space-Invaders.png'),
    auto;
  inset: -2.5vw;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  translate: var(--translateX) -70vh;
  rotate: var(--angle);
  transition: opacity 1s, transform 0.4s;
  scale: var(--scale);

  &:hover {
    scale: 1.2;
  }

  &:focus {
    --playState: paused;
  }
}

.red-flag {
  --delay: calc(var(--i) * 1s + 2s);
  width: clamp(50px, 5vw, 120px);
  height: clamp(50px, 5vw, 120px);
  background-image: url('https://helpimg.s3.us-east-1.amazonaws.com/landing_pages/CSAM/2025/arcade/redflag.png');

  &:checked {
    counter-increment: score;
  }
}
.enkryptor {
  --delay: calc(var(--i) * 1.2s + 5s);
  background-image: url('https://helpimg.s3.us-east-1.amazonaws.com/landing_pages/CSAM/2025/arcade/enkryptor.png');
  width: clamp(60px, 8vw, 120px);
  height: clamp(60px, 8vw, 120px);
}

.cyberpunk {
  --delay: calc(var(--i) * 1.5s + 7s);

  background-image: url('https://helpimg.s3.us-east-1.amazonaws.com/landing_pages/CSAM/2025/arcade/cyberpunk.png');
  width: clamp(60px, 8vw, 120px);
  height: clamp(60px, 8vw, 120px);
}
.deepfake {
  --delay: calc(var(--i) * 1.8s + 9s);

  background-image: url('https://helpimg.s3.us-east-1.amazonaws.com/landing_pages/CSAM/2025/arcade/deepfake.png');
  width: clamp(80px, 12vw, 180px);
  height: clamp(80px, 12vw, 180px);
}
.doppelganger {
  --delay: calc(var(--i) * 1.5s + 14s);

  background-image: url('https://helpimg.s3.us-east-1.amazonaws.com/landing_pages/CSAM/2025/arcade/doppelganger.png');
  width: clamp(80px, 12vw, 180px);
  height: clamp(80px, 12vw, 180px);
}

.gui {
  position: absolute;
  bottom: 0;
  width: 100%;
  display: flex;
  justify-content: space-between;
  font-size: var(--step-4);
  padding-inline: var(--space-l);
  pointer-events: none;
  animation: hideGui 0.1s 32.5s forwards;
}

@keyframes hideGui {
  to {
    opacity: 0;
    visibility: hidden;
  }
}

.timer span {
  &::before {
    content: '3';
    animation: timer 100s -67s step-end;
  }

  &::after {
    content: '0';
    animation: timer 10s 3s 3 step-end;
  }
}

@keyframes timer {
  0% {
    content: '9';
  }
  10% {
    content: '8';
  }
  20% {
    content: '7';
  }
  30% {
    content: '6';
  }
  40% {
    content: '5';
  }
  50% {
    content: '4';
  }
  60% {
    content: '3';
  }
  70% {
    content: '2';
  }
  80% {
    content: '1';
  }
  90% {
    content: '0';
  }
}
.score::after {
  content: attr(data-score);
}

.retro {
  text-shadow: 2px 8px 0px #ff0088, 0 0 1em rgb(136, 0, 255),
    0 0 0.2em rgb(136, 0, 255);
  color: var(--clr-accent);
  text-transform: uppercase;
  margin-block-end: 0;
  line-height: var(--lh-fine);
}

.screen-end-text {
  display: flex;
  gap: 2rem;
  flex-direction: column;

  h2 {
    margin-block-start: 0;
    font-size: var(--step-6);
  }
}

.final-score {
  font-size: var(--step-3);
  letter-spacing: 3px;
  font-weight: var(--fw-bold);
}

.disclaimer {
  font-size: var(--step--1);
  letter-spacing: 2px;
  background: var(--clr-black);
}
